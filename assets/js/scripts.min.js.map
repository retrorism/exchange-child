{"version":3,"sources":["wp-foundation.js","init-foundation.js"],"names":["handleScroll","previousScroll","pageYOffset","jQuery","window","scroll","currentScroll","this","scrollTop","removeClass","addClass","getArchiveMap","undefined","Exchange","PluginExtensions","LMP","maps","hashedMap","hasOwnProperty","archiveMap","hash","slice","getUrlVars","vars","hashes","location","href","indexOf","split","i","length","push","getFocusTranslate","img_placeholder","img","img_data","parentNode","dataset","h","clientHeight","container_h","offsetHeight","px_translate","focus_h","max_translate","translate","doFocusTranslate","translateNeg","transform","setAttribute","document","foundation","masonryOptions","percentPosition","columnWidth","gutter","itemSelector","masonryIsActive","$","ready","$grid","each","find","on","e","target","floated_elements","querySelectorAll","ii","equal_element","nextElementSibling","equal_h","style","height","preventDefault","id","data","targetjQ","prop","selection","grid","prToken","action","update_id","val","prid","token","security","remove","html","ajax","url","exchange_ajax","ajax_url","method","done","response","removeProp","select","doLanguageSwitch","lang","index","element","hasClass","value","wrapper","parent","paragraphs","children","map","fitBounds","clusterLayer","getBounds","masonry","FWP","reset","last","innerWidth","innerHeight","wrap","is_load_more","paged","parseInt","settings","pager","page","soft_refresh","refresh","allObjects","map_markers","matches","matchedMarkers","filter","p","refreshObjects","renderObjects","total_pages","loaded","after","show","hide","animate","offset","bottom","template","archiveHeader","tax","facets","replace","console","log"],"mappings":"AAAA,QAAAA,gBACA,GAAAC,GAAAC,WACAC,QAAAC,QAAAC,OAAA,WACA,GAAAC,GAAAH,OAAAI,MAAAC,WAIAP,GAAAK,EACAJ,YAAA,IACAC,OAAA,oBAAAM,YAAA,YAEAN,OAAA,oBAAAO,SAAA,cAMA,QAAAC,iBACA,GAAAC,SAAAC,UACAD,SAAAC,SAAAC,kBACAF,SAAAC,SAAAC,iBAAAC,KACAH,SAAAC,SAAAC,iBAAAC,IAAAC,KAHA,CAMA,IAAA,GAAAC,KAAAJ,UAAAC,iBAAAC,IAAAC,KACA,GAAAH,SAAAC,iBAAAC,IAAAC,KAAAE,eAAAD,GAAA,CACA,GAAAE,GAAAN,SAAAC,iBAAAC,IAAAC,KAAAC,EACAE,GAAAC,KAAAH,EAAAI,MAAA,EACA,OAGA,MAAAF,GACAA,EADA,QAKA,QAAAG,cAGA,IAAA,GAFAF,GAAAG,KACAC,EAAApB,OAAAqB,SAAAC,KAAAL,MAAAjB,OAAAqB,SAAAC,KAAAC,QAAA,KAAA,GAAAC,MAAA,KACAC,EAAA,EAAAA,EAAAL,EAAAM,OAAAD,IAEAT,EAAAI,EAAAK,GAAAD,MAAA,KACAL,EAAAQ,KAAAX,EAAA,IACAG,EAAAH,EAAA,IAAAA,EAAA,EAEA,OAAAG,GAGA,QAAAS,mBAAAC,EAAAC,GAEA,GADAC,SAAAF,EAAAG,WAAAC,SACAF,SACA,OAAA,CAEA,IAAAG,GAAAJ,EAAAK,aACAC,EAAAP,EAAAQ,aACAC,EAAAP,SAAAQ,QAAAL,EAAAE,EAAA,EACAI,GAAAN,EAAAE,GAAAF,EAAA,IACAO,EAAAH,EAAAJ,EAAA,GAIA,SAAAI,EAAA,GAAAG,EAAA,KAIAA,EAAAD,EACAA,EAEAC,GAIA,QAAAC,kBAAAZ,GACA,GAAAD,GAAAC,EAAAE,UAGA,IAFAS,UAAAb,kBAAAC,EAAAC,GAEAW,UAAA,CACA,GAAAE,GAAAF,UAAA,KAAAA,UAAAA,UACAG,EAAA,yBAAAD,EAAA,KACAb,GAAAe,aAAA,QAAAD,IC/EA7C,OAAA+C,UAAAC,YDmFA,IAAAC,iBACAC,iBAAA,EACAC,YAAA,uBACAC,OAAA,yBACAC,aAAA,4BAGAC,iBAAA,GAEA,SAAAC,GAEAA,EAAAR,UAAAS,MAAA,WAEA,GAAA/C,QAAAgD,EACA,GAAAA,GAAAF,EAAA,0BAGA,IAAA,IAAAA,EAAA,0BAAA5B,OAAA,CACA,GAAA8B,GAAAF,EAAA,yBACAN,gBAAAI,aAAA,0BAgBAE,EAAA,UAAAG,KAAA,WACA,GAAA3B,GAAAwB,EAAAnD,MAAAuD,KAAA,eACA5B,GAAA6B,GAAA,OAAA,SAAAC,GACAlB,iBAAAkB,EAAAC,WAKA,KAAA,GADAC,GAAAhB,SAAAiB,iBAAA,YACAC,EAAA,EAAAA,EAAAF,EAAApC,OAAAsC,IAAA,CACA,GAAAC,GAAAH,EAAAE,GAAAE,mBACAhC,EAAA4B,EAAAE,GAAA3B,aACA8B,EAAAF,EAAA5B,YACAH,GAAAiC,IACAF,EAAAG,MAAAC,OAAAnC,EAAA,MA+DA,GA3DAoB,EAAA,sCAAAK,GAAA,QAAA,SAAAC,GACAA,EAAAU,gBACA,IAAAC,GAAAjB,EAAAnD,MAAAqE,KAAA,UACAC,EAAAnB,EAAA,0BAAAI,KAAA,IAAAa,EACAjB,GAAA,UAAAP,WAAA,eAAA,EAAA0B,KAGAnB,EAAA,uBAAAK,GAAA,QAAA,SAAAC,GACAA,EAAAU,iBACAhB,EAAAnD,MAAAuE,KAAA,YAAA,EACA,IAAAC,GAAArB,EAAA,8CACAsB,EAAAtB,EAAA,uBACAuB,EAAA3D,aAAA,EACA,IAAAV,SAAAmE,EAAA,CACA,GAAAH,IACAM,OAAA,sBACAC,UAAAJ,EAAAK,MACAC,KAAAN,EAAAH,KAAA,mBACAU,MAAAL,EACAM,SAAA7B,EAAA,sBAAA0B,MAEA1B,GAAA,mBAAA8B,SACA9B,EAAA,mBAAAhD,SAAA,MACAsE,EAAAS,KAAA,IACA/B,EAAAgC,MACAC,IAAAC,cAAAC,SACAC,OAAA,OACAlB,KAAAA,IACAmB,KAAA,SAAAC,GACAhB,EAAAS,KAAAO,GACAtC,EAAA,mBAAAjD,YAAA,MACAiD,EAAAnD,MAAA0F,WAAA,iBAMAvC,EAAA,0CAAAG,KAAA,WACA,GAAAqC,GAAAxC,EAAAnD,MAAAuD,KAAA,sBACAoC,GAAAnC,GAAA,SAAA,WAEA,QAAAoC,GAAAC,GACA,MAAA,UAAAC,EAAAC,GACA5C,EAAAnD,MAAAE,YAAA,QACAiD,EAAAnD,MAAAgG,SAAAH,IACA1C,EAAAnD,MAAAG,SAAA,SALA,GAAA0F,GAAA,cAAA7F,KAAAiG,MASAC,EAAA/C,EAAAnD,MAAAmG,SAAAA,OAAA,yCACAC,YAAAF,EAAAG,SAAA,mCACAD,WAAA9C,KAAAsC,EAAAC,SAIA1C,EAAA,QAAA6C,SAAA,WAAA7C,EAAA,QAAA6C,SAAA,gBACA7C,EAAA,SAAAK,GAAA,sBAAA/D,cAGA0D,EAAA,QAAA6C,SAAA,YACA7C,EAAA,QAAA6C,SAAA,0BACA7C,EAAA,QAAA6C,SAAA,WACA,IAAA7C,EAAA,0BAAA5B,OAAA,CACA,GAAA4B,EAAA,QAAA6C,SAAA,iCAAA,CACA,GAAA3F,SAAAO,EACA,GAAAA,GAAAR,eAEAQ,IACAA,EAAA0F,IAAAC,UAAA3F,EAAA4F,aAAAC,aAGApG,SAAAgD,IACAA,EAAAqD,QAAA7D,gBACAK,iBAAA,GAiBAC,EAAA,iCAAAK,GAAA,QAAA,WAEAnD,QAAAsG,KACAA,IAAAC,UAIAzD,EAAA,iBAAAK,GAAA,QAAA,WACA,QAAAZ,WAAA,YAIAO,EAAA,sCAAA8B,SAGA9B,EAAA,0BAAA,wBAAA0D,OAAA1G,SAAA,OAGAgD,EAAA,wDAAAG,KAAA,WACAH,EAAAnD,MAAA8G,aAAA3D,EAAAnD,MAAA+G,cAAA,IACA5D,EAAAnD,MAAAgH,KAAA,wCAEA7D,EAAAnD,MAAAgH,KAAA,iCAMA7D,EAAAR,UAAAa,GAAA,QAAA,iBAAA,WAEAL,EAAA,kBAAA+B,KAAA,cACAyB,IAAAM,cAAA,EACAN,IAAAO,MAAAC,SAAAR,IAAAS,SAAAC,MAAAC,MAAA,EACAX,IAAAY,cAAA,EACAZ,IAAAa,YAIArE,EAAAR,UAAAa,GAAA,iBAAA,WACA,GAAAH,GAAAF,EAAA,0BAEAD,kBACAG,EAAAqD,QAAA,WAEArD,EAAAqD,QAAA7D,gBACAK,iBAAA,CAEA,IAAAtC,GAAAR,eACA,IAAAC,SAAAO,EAAA,CAIA,GAAA6G,GAAA5H,OAAA,mBAAAe,EAAAC,KACA,IAAAR,SAAAoH,GACA,GAAAA,EAAAC,YAAAnG,QACA,GAAAoF,IAAAS,SAAAO,QAAApG,OAFA,CAMA,GAAAkG,EAAAC,YAAAnG,OAAA,GAAAoF,IAAAS,SAAAO,QAAApG,OAAA,EAAA,CACA,GAAAqG,GAAAH,EAAAC,YAAAG,OAAA,SAAAC,GACA,IAAA,GAAAxG,GAAA,EAAAqF,IAAAS,SAAAO,QAAApG,OAAAD,EAAAA,IACA,GAAAqF,IAAAS,SAAAO,QAAArG,KAAAwG,EAAA1D,GACA,OAAA,GAGA,IAAAwD,EAAArG,OAAA,EAAA,CACA,GAAAwG,IACAL,YAAAE,EAEAhH,GAAAoH,cAAAD,IAIApB,IAAAS,SAAAC,MAAAC,KAAAX,IAAAS,SAAAC,MAAAY,aACAtB,IAAAuB,QAAA,EAAA/E,EAAA,kBAAA5B,OACA4B,EAAA,qBAAAgF,MAAA,yEAGAhF,EAAA,kBAAA+B,KAAA,aAAAkD,OAIAjF,EAAA,kBAAAkF,OAGA1B,IAAAS,SAAAC,MAAAC,KAAA,GACAnE,EAAA,cAAAmF,SACArI,UAAAkD,EAAA,2BAAAoF,SAAAC,QACA,SAKArF,EAAAR,UAAAa,GAAA,kBAAA,WAIA,GAHAmD,IAAAuB,SACAvB,IAAAO,MAAA,GAEA/D,EAAA,QAAA6C,SAAA,yBAAA,CACA,GAAA3F,SAAAsG,KAAA,qBAAAA,IAAA8B,SAAA,CACA,GAAAC,GAAA,eACA,KAAA,GAAAC,KAAAhC,KAAAiC,OACA,GAAAjC,IAAAiC,OAAAjI,eAAAgI,GACA,IAAA,GAAArH,GAAA,EAAAA,EAAAqF,IAAAiC,OAAAD,GAAApH,OAAAD,IACAoH,GAAA/B,IAAAiC,OAAAD,GAAArH,GAAAuH,QAAA,KAAA,IAIA1F,GAAA,2BAAA+B,KAAA,OAAAwD,EAAA,SAEAI,QAAAC,IAAAL,OAKA9I","file":"scripts.min.js","sourcesContent":["function handleScroll() {\n\tvar previousScroll = pageYOffset;\n\tjQuery(window).scroll(function(){\n\t\tvar currentScroll = jQuery(this).scrollTop();\n\t\tif (currentScroll > previousScroll){\n\t\t} else {\n\t\t}\n\t\tpreviousScroll = currentScroll;\n\t\tif ( pageYOffset < 100 ) {\n\t\t\tjQuery('.breadcrumbs-bar').removeClass('scrolled');\n\t\t} else {\n\t\t\tjQuery('.breadcrumbs-bar').addClass('scrolled');\n\t\t}\n\n\t});\n}\n\nfunction getArchiveMap() {\n\tif ( undefined === Exchange \n\t\t|| undefined === Exchange.PluginExtensions \n\t\t|| undefined === Exchange.PluginExtensions.LMP\n\t\t|| undefined === Exchange.PluginExtensions.LMP.maps ) {\n\t\treturn;\n\t}\n    for ( var hashedMap in Exchange.PluginExtensions.LMP.maps ) {\n        if ( Exchange.PluginExtensions.LMP.maps.hasOwnProperty( hashedMap ) ) {\n            var archiveMap = Exchange.PluginExtensions.LMP.maps[hashedMap];\n            archiveMap.hash = hashedMap.slice( 4 );\n            break;\n        }\n    }\n    if ( archiveMap ) {\n        return archiveMap;\n    }\n}\n\nfunction getUrlVars() {\n    var vars = [], hash;\n    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n    for(var i = 0; i < hashes.length; i++)\n    {\n        hash = hashes[i].split('=');\n        vars.push(hash[0]);\n        vars[hash[0]] = hash[1];\n    }\n    return vars;\n}\n\nfunction getFocusTranslate( img_placeholder, img ) {\n\timg_data = img_placeholder.parentNode.dataset;\n\tif ( ! img_data ) {\n\t\treturn false;\n\t}\n\tvar h = img.clientHeight,\n\tcontainer_h =  img_placeholder.offsetHeight,\n\tpx_translate = ( img_data.focus_h * h ) - ( container_h / 2 ),\n\tmax_translate = ( ( h - container_h ) / h ) * 100,\n\ttranslate = ( px_translate / h ) * 100;\n\n\t//If the center of the container is below the focus point, don't move.\n\t//Or: if the translation is downwards, don't move (we're working from top).\n\tif ( px_translate < 0 || translate < 0 ) {\n\t\treturn false;\n\t}\n\n\tif ( translate > max_translate ) {\n\t\treturn max_translate;\n\t} else {\n\t\treturn translate;\n\t}\n}\n\nfunction doFocusTranslate( img ) {\n\tvar img_placeholder = img.parentNode;\n\ttranslate = getFocusTranslate( img_placeholder, img );\n\t// Keep the negative, add minus if necessary\n\tif ( translate ) {\n\t\tvar translateNeg = translate > 0 ? -1 * translate : translate,\n\t\ttransform = 'transform: translateY(' + translateNeg + '%);';\n\t\timg.setAttribute( 'style', transform );\n\t}\n}\n\nvar masonryOptions = { \n\t\t\t\"percentPosition\": true, \n\t\t\t\"columnWidth\": \".masonry__grid-sizer\", \n\t\t\t\"gutter\": \".masonry__gutter-sizer\", \n\t\t\t\"itemSelector\": \".archive__grid__griditem\"\n};\n\nvar masonryIsActive = false;\n\n(function($){\n\n\t$(document).ready(function() {\n\n\t\tif ( $grid == undefined ) {\n\t\t\tvar $grid = $('.archive__grid__masonry');\n\t\t}\n\n\t\tif ( $('.featuredgrid__masonry').length === 1 ) {\n\t\t\tvar $grid = $('.featuredgrid__masonry');\n\t\t\tmasonryOptions.itemSelector = \".featuredgrid__griditem\";\n\t\t}\n\n\t\t// if ('object' == typeof FWP) { \n\t\t//     wp.hooks.addFilter('facetwp/template_html', function(resp, params) {\n\t\t//         if (FWP.is_load_more) {\n\t\t//             FWP.is_load_more = false;\n\t\t//             $('.facetwp-template').append(params.html);\n\t\t//             return true;\n\t\t//         }\n\t\t//         return resp;\n\t\t//     });\n\t\t// } else {\n\t\t// \tconsole.log( 'FWP is not defined yet' );\n\t\t// }\n\n\t\t$('.focus').each(function() {\n\t\t\tvar img = $(this).find('.image--main');\n\t\t\timg.on('load', function(e){\n\t\t\t\tdoFocusTranslate(e.target);\n\t\t\t});\n\t\t})\n\n\t\tvar floated_elements = document.querySelectorAll('.floated');\n\t\tfor (var ii = 0; ii < floated_elements.length; ii++ ) {\n\t\t\tvar equal_element = floated_elements[ii].nextElementSibling,\n\t\t\th = floated_elements[ii].offsetHeight,\n\t\t\tequal_h = equal_element.offsetHeight;\n\t\t\tif ( h > equal_h ) {\n\t\t\t\tequal_element.style.height = h + 'px';\n\t\t\t}\n\t\t}\n\n\t\t$( 'a[data-open=story__modal--gallery]' ).on( 'click', function( e ) {\n\t\t\te.preventDefault();\n\t\t\tvar id = $(this).data('img_id'),\n\t\t\ttargetjQ = $('#story__modal--gallery').find('#' + id);\n\t\t\t$('.orbit').foundation( 'changeSlide', true, targetjQ );\n\t\t})\n\n\t\t$( '#token-form__submit' ).on( 'click', function( e ) {\n\t\t\te.preventDefault();\n\t\t\t$(this).prop('disabled',true);\n\t\t\tvar selection = $( '.token-form__collab-select option:selected' ),\n\t\t\tgrid = $('.grid--form-options'),\n\t\t\tprToken = getUrlVars()['pr'];\n\t\t\tif ( undefined !== selection ) {\n\t\t\t\tvar data = {\n\t\t\t\t\taction: 'exchange_token_form',\n\t\t\t\t\tupdate_id : selection.val(),\n\t\t\t\t\tprid : selection.data('programme-round'),\n\t\t\t\t\ttoken : prToken,\n\t\t\t\t\tsecurity : $( '.token-form__nonce' ).val()\n\t\t\t\t};\n\t\t\t\t$('.loader-pointer').remove();\n\t\t\t\t$('.loader-wrapper').addClass('go');\n\t\t\t\tgrid.html('');\n\t\t\t\t$.ajax( {\n\t\t\t\t\t'url':    exchange_ajax.ajax_url,\n\t\t\t\t\t'method': 'POST',\n\t\t\t\t\t'data':   data\n\t\t\t\t} ).done( function ( response ) {\n\t\t\t\t\tgrid.html( response );\n\t\t\t\t\t$('.loader-wrapper').removeClass('go');\n\t\t\t\t\t$(this).removeProp('disabled');\n\n\t\t\t\t} );\n\t\t\t};\n\t\t} );\n\n\t\t$('.translatedparagraph--has_translations').each( function() {\n\t\t\tvar select = $( this ).find('.translation-select');\n\t\t\tselect.on('change', function() {\n\t\t\t\tvar lang = 'paragraph--' + this.value;\n\t\t\t\tfunction doLanguageSwitch( lang ) {\n\t\t\t\t\treturn function( index, element) {\n\t\t\t\t\t\t$( this ).removeClass('show');\n\t\t\t\t\t\tif ( $( this ).hasClass( lang ) ) {\n\t\t\t\t\t\t\t$( this ).addClass('show');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvar wrapper = $( this ).parent().parent('.translatedparagraph--has_translations');\n\t\t\t\tparagraphs = wrapper.children('.translatedparagraph__paragraph');\n\t\t\t\tparagraphs.each( doLanguageSwitch( lang ) );\n\t\t\t});\n\t\t});\n\n\t\tif ( $('body').hasClass('single') || $('body').hasClass('page-child') ) {\n\t\t\t$('#main').on('scrollme.zf.trigger', handleScroll);\n\t\t}\n\n\t\tif ( $('body').hasClass( 'archive' ) \n\t\t\t|| $('body').hasClass( 'page-template-archive') \n\t\t\t|| $('body').hasClass( 'search') \n\t\t\t|| $('.featuredgrid__masonry').length === 1 ) {\n\t\t\tif ( $('body').hasClass( 'post-type-archive-participant') ) {\n\t\t\t\tif ( archiveMap === undefined ) {\n\t\t\t\t\tvar archiveMap = getArchiveMap();\n\t\t\t\t}\n\t\t\t\tif ( archiveMap ) {\t\t\t\t\n\t\t\t\t\tarchiveMap.map.fitBounds( archiveMap.clusterLayer.getBounds() );\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( $grid !== undefined ) {\n\t\t\t\t$grid.masonry( masonryOptions ); // re-initialize\n\t\t\t\tmasonryIsActive = true;\n\t\t\t}\n\t\t}\n\n  //   \t$('#facet-tabs').on('change.zf.tabs', function() {\n\t\t// \tif ( archiveMap === undefined ) {\n\t\t// \t\tvar archiveMap = getArchiveMap();\n\t\t// \t}\n\t\t// \tif ( archiveMap.map !== undefined ) {\n\t\t// \t\tarchiveMap.map.invalidateSize().fitBounds( archiveMap.clusterLayer.getBounds() );\n\t\t// \t}\n\t\t// \tif ( $grid !== undefined ) {\n\t\t// \t\t$grid.masonry( masonryOptions ); // re-initialize\n\t\t// \t\tmasonryIsActive = true;\n\t\t// \t}\n\t\t// })\n\n\t\t$('.archive__facets__type__reset').on('click', function() {\n\t\t\t// Reset all facets to their default state\n\t\t\tif ( undefined != FWP ) {\n\t\t\t\tFWP.reset();\n\t\t\t}\n\t\t})\n\n\t\t$('#facet-switch').on('click', function() {\n\t\t\t('#main').foundation('toggle');\n\t\t})\n\n\t\t// Remove empty P tags created by WP inside of Accordion and Orbit\n\t\t$('.accordion p:empty, .orbit p:empty').remove();\n\n\t\t// Makes sure last grid item floats left\n\t\t$('.archive__grid .columns', 'relatedgrid .columns').last().addClass( 'end' );\n\n\t\t// Adds Flex Video to YouTube and Vimeo Embeds\n\t\t$('iframe[src*=\"youtube.com\"], iframe[src*=\"vimeo.com\"]').each(function() {\n\t\t\tif ( $(this).innerWidth() / $(this).innerHeight() > 1.5 ) {\n\t\t\t\t$(this).wrap(\"<div class='widescreen flex-video'/>\");\n\t\t\t} else {\n\t\t\t\t$(this).wrap(\"<div class='flex-video'/>\");\n\t\t\t}\n\t\t});\n\n\t})\n\n\t $(document).on('click', '.fwp-load-more', function() {\n\n        $('.fwp-load-more').html('Loading...');\n        FWP.is_load_more = true;\n        FWP.paged = parseInt(FWP.settings.pager.page) + 1;\n        FWP.soft_refresh = true;\n        FWP.refresh();\n\n    });\n\n\t$(document).on('facetwp-loaded', function() {\n\t\tvar $grid = $('.archive__grid__masonry');\n\n\t\tif ( masonryIsActive ) {\n\t\t    $grid.masonry('destroy'); // destroy\n\t\t}\n\t\t$grid.masonry( masonryOptions ); // re-initialize\n\t\tmasonryIsActive = true;\n\t\t\n\t\tvar archiveMap = getArchiveMap();\n\t\tif ( archiveMap === undefined ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar allObjects = window['leaflet_objects_' + archiveMap.hash];\n\t\tif ( allObjects === undefined\n\t\t\t|| allObjects.map_markers.length == 0\n\t\t\t|| FWP.settings.matches.length == 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( allObjects.map_markers.length > 0 && FWP.settings.matches.length > 0 ) {\n\t\t\tvar matchedMarkers = allObjects.map_markers.filter( function( p ) {\n\t\t\t\tfor ( var i = 0; FWP.settings.matches.length > i; i++ )\n\t\t\t\t\tif (  FWP.settings.matches[i] === p.id ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t});\n\t\t\tif ( matchedMarkers.length > 0 ) {\n\t\t\t\tvar refreshObjects = {\n\t\t\t\t\tmap_markers : matchedMarkers\n\t\t\t\t};\n\t\t\t\tarchiveMap.renderObjects( refreshObjects );\n\t\t\t}\n\t\t}\n\n\t\tif (FWP.settings.pager.page < FWP.settings.pager.total_pages) {\n            if (! FWP.loaded && 1 > $('.fwp-load-more').length) {\n                $('.facetwp-template').after('<button style=\"clear: both;\" class=\"fwp-load-more\">Load more</button>');\n            }\n            else {\n                $('.fwp-load-more').html('Load more').show();\n            }\n        }\n        else {\n            $('.fwp-load-more').hide();\n        }\n\n\t\tif ( FWP.settings.pager.page > 1 ) {\n\t\t\t$('html, body').animate({\n\t            scrollTop: $('.archive__grid__masonry').offset().bottom\n\t        }, 1000);\n        }\n\n\t})\n\n    $(document).on('facetwp-refresh', function() {\n        if (! FWP.loaded) {\n            FWP.paged = 1;\n        }\n        if ( $('body').hasClass( 'page-template-archive' ) ) {\n\t\t\tif ( FWP !== undefined && FWP.template === 'archive_filtered' ) {\n\t\t\t\tvar archiveHeader = 'Results for: ';\n\t\t\t\tfor ( var tax in FWP.facets ) {\n\t\t\t\t\tif ( FWP.facets.hasOwnProperty( tax )  ) {\n\t\t\t\t\t\tfor ( var i = 0; i < FWP.facets[tax].length; i++ ) {\n\t\t\t\t\t\t\tarchiveHeader += FWP.facets[tax][i].replace(/-/g,\" \");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$('.archive__title-wrapper').html('<h1>' + archiveHeader + '</h1>' );\n\t\t\t}\n\t\t\tconsole.log( archiveHeader );\n\t\t}\n\n    });\n\n})(jQuery);\n\t","jQuery(document).foundation();"]}